# 🔗 Url 模块

`Url` 模块是 HTTP 服务器的 URL 编解码工具，提供符合 RFC 3986 标准的 URL 编码（Percent-Encoding）和解码功能，支持处理特殊字符转换，采用 header-only 设计，轻量高效，无需额外编译即可直接集成。

## ✨ 模块职责

- **URL 解码**：将 `%XX` 编码序列还原为原始字符，并将 `+` 转换为空格。
- **URL 编码**：对非安全字符（如空格、符号）进行 `%XX` 编码，保留字母数字及部分安全字符（`-`、`_`、`.`、`~`）。
- **标准化处理**：遵循常见 Web 场景规则（如查询参数中 `+` 与空格的互转）。

## 📌 核心特性

- **RFC 兼容性**：编码保留字符集符合 RFC 3986 标准，解码支持 `%XX` 和 `+` 转换。
- **零依赖设计**：纯 C++ 标准库实现，无外部依赖，跨平台兼容。
- **线程安全**：静态方法无共享状态，天然支持多线程调用。
- **高效实现**：基于流式处理，避免频繁内存分配。

## ⚙️ 方法概览

| 方法名称 | 功能描述 |
| ---- | ---- |
| `decode` | 解码 URL 字符串：将 `%XX` 转为对应字符，`+` 转为空格。 |
| `encode` | 编码 URL 字符串：对非安全字符进行 `%XX` 编码，保留 `A-Za-z0-9-_.~`。 |

## 🔄 转换规则

### 解码规则（`Url::decode`）
- **`%XX` 序列**：将 `%` 后两位十六进制数字转换为对应字符（如 `%20` -> 空格）。
- **`+` 符号**：转换为空格（` `），适用于查询参数场景。
- **无效编码**：若 `%` 后不足两位字符，保留 `%` 符号（如 `%A` -> `%A`）。

### 编码规则（`Url::encode`）
- **保留字符**：不编码 `A-Z`、`a-z`、`0-9`、`-`、`_`、`.`、`~`。
- **其他字符**：转换为 `%XX` 格式（如空格 -> `%20`，`@` -> `%40`）。
- **大写十六进制**：编码结果使用大写字母（如 `%2F` 而非 `%2f`）。

## ⚠️ 注意事项

- **`+` 符号差异**：解码时 `+` 转为空格，但编码时**不会**将空格转为 `+`（转为 `%20`）。
- **编码一致性**：与浏览器行为一致，适合路径和查询参数编码。
- **异常处理**：解码时非法 `%` 序列（如 `%G1`）会保留原样，不会抛出异常。

## 🔑 设计意图

- **应用场景适配**：解码支持 `+` 转空格，兼容 HTML 表单查询参数的编码习惯。
- **性能优化**：使用 `std::ostringstream` 流式处理，减少临时字符串拼接开销。
- **可扩展性**：通过静态方法提供工具函数，无需实例化即可直接调用。
