# 📝 FormPasser 模块

`FormPasser` 模块是 HTTP 服务器的表单解析工具，负责解析 `application/x-www-form-urlencoded` 格式的请求体，将其转换为键值对集合，支持 URL 解码，简化表单数据的提取与处理流程。

## ✨ 模块职责

- **表单数据解析**：将 `key1=value1&key2=value2` 格式的字符串拆解为键值对集合。
- **URL 解码**：对键和值中的 `%XX` 编码及 `+` 符号进行解码，还原原始数据。
- **无效数据处理**：忽略不符合 `key=value` 格式的字段，避免解析错误。

## 📌 核心特性

- **轻量级解析**：基于流式分割和 URL 解码，无复杂依赖或动态内存分配。
- **线程安全**：纯静态方法实现，天然支持多线程调用。
- **兼容性**：严格遵循 `application/x-www-form-urlencoded` 格式标准。

## ⚙️ 方法概览

| 方法名称 | 功能描述 |
| ---- | ---- |
| `parse` | 解析表单数据字符串，返回解码后的键值对集合（`unordered_map<string, string>`）。 |

## 🔄 解析流程

1. **按 `&` 分割字段**：将输入字符串按 `&` 分割为多个键值对片段（如 `key1=value1&key2=value2` -> `["key1=value1", "key2=value2"]`）。
2. **按 `=` 分割键值**：对每个片段按第一个 `=` 分割为键和值（如 `key1=value1` -> `key="key1"`, `value="value1"`）。
3. **URL 解码**：对键和值调用 `Url::decode` 方法，还原特殊字符（如 `%20` -> 空格，`+` -> 空格）。
4. **结果存储**：将解码后的键值对存入哈希表，重复键会被覆盖。

## ⚠️ 注意事项

- **键值对格式要求**：仅处理包含 `=` 的字段，无 `=` 的字段（如 `key` 或 `=value`）会被忽略。
- **重复键处理**：相同键名的字段，后出现的值会覆盖先前的值。
- **编码兼容性**：依赖 `Url::decode` 实现，需确保输入字符串符合 URL 编码规则。

## 🔑 关键设计

- **流式分割优化**：使用 `std::istringstream` 和 `getline` 高效分割字段，避免多次拷贝。
- **严格分割逻辑**：仅按第一个 `=` 分割键值，适配包含 `=` 的特殊值（如 `query=param=1` -> `key="query"`, `value="param=1"`）。
- **无缝集成**：与 `Url` 模块结合，自动处理编码与解码，简化业务逻辑。
