# 📦 StaticFile 模块

`StaticFile` 模块是 WebServer 的静态资源处理组件，负责响应 HTML、CSS、JS、图片等文件请求，并在访问异常时生成标准化错误页面。支持缓存静态资源，大幅提升文件响应性能。

## ✨ 模块功能

- 响应用户请求的本地静态资源文件。
- 自动推断 MIME 类型，设置正确的 `Content-Type`。
- 校验路径合法性，防止目录穿越。
- 缓存静态资源内容，支持命中检测与自动失效更新。
- 访问目录路径时，自动生成文件索引页面。
- 根据错误状态码返回标准化 HTML 错误页面。

## 📌 主要特性

- **安全性**：路径规范化处理，防止非法目录访问。
- **缓存加速**：缓存热点资源，减少 I/O 提高响应性能。
- **错误处理**：内置 HTTP 常见错误页面模板，支持自动响应。
- **目录浏览**：访问目录时，自动列出该目录下的文件与子目录，支持排序、返回上级等功能。
- **灵活可配置**：支持自定义静态资源根目录。
- **日志记录**：记录文件访问、目录浏览、缓存命中等调试信息。

## 🛠️ 使用说明

用于处理 `GET` 请求中的文件访问。当用户请求 `/images/img.png` 这类路径时，模块会：

1. 检查路径是否合法，是否存在路径穿越风险；
2. 判断文件是否存在并获取其 MIME 类型；
3. 若命中缓存则直接返回缓存内容；
4. 若缓存未命中或文件已修改，则读取磁盘并更新缓存；
5. 构造完整的 HTTP 响应返回给客户端。

若访问路径为目录（例如 `/images/`），模块将自动生成一个目录索引页面，展示目录下的所有文件与文件夹，并带有「返回上级」按钮。

## 📁 错误状态

当访问路径异常时，将返回对应错误页面，当前支持的状态码包括：

- `400 Bad Request`
- `403 Forbidden`
- `404 Not Found`
- `405 Method Not Allowed`
- `500 Internal Server Error`
- `502 Bad Gateway`

模块会根据错误类型自动构建简洁友好的错误响应页面。
