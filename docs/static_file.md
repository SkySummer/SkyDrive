# 📦 StaticFile 模块

`StaticFile` 模块是 WebServer 的静态资源处理组件，负责响应 HTML、CSS、JS、图片等文件请求，支持静态资源缓存和目录索引展示。

## ✨ 模块功能

- 响应用户请求的本地静态资源文件。
- 自动推断 MIME 类型，设置正确的 `Content-Type`。
- 校验路径合法性，防止目录穿越。
- 缓存静态资源内容，支持命中检测与自动失效更新。
- 访问目录路径时，自动生成文件索引页面（含图标、大小、时间、上级跳转等信息）。

## 📌 主要特性

- **路径安全性**：路径规范化处理，防止非法目录访问。
- **缓存加速**：缓存热点资源，减少 I/O 提高响应性能。
- **目录索引**：访问目录时，自动生成友好的 HTML 页面，展示该目录下所有文件和文件夹。
- **重定向支持**：访问目录路径未以 `/` 结尾时，自动返回 301 重定向响应。
- **日志记录**：记录文件访问、目录浏览、缓存命中等调试信息。

## 🛠️ 使用说明

用于处理 `GET` 请求中的文件访问。当用户请求 `/images/img.png` 这类路径时，模块会：

1. 解码请求路径并校验合法性，防止路径穿越；
2. 若目标路径为目录，检查是否已添加末尾 `/`，若无则重定向，否则生成目录索引页面；
3. 若目标为文件，先检查缓存是否存在且未失效；
4. 命中缓存则直接返回缓存内容；
5. 若缓存未命中或已失效，则读取磁盘文件内容并更新缓存；
6. 构造 HTTP 响应返回给客户端。

## 📂 目录访问示例

若访问路径为目录（如 /assets/），模块将生成 HTML 索引页面，展示：

- 所有子目录与文件（图标+名称）；
- 文件大小与修改时间；
- 「返回上级」链接（若非根目录）；
- 所有路径均为 URL 编码，确保安全性。
