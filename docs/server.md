# 🚀 Server 模块

`Server` 模块是整个项目的核心，负责管理服务器生命周期、客户端连接、事件分发和任务调度。它基于 `epoll` 实现高性能 I/O 多路复用，并结合线程池异步处理请求，实现高并发的 HTTP 服务能力。

## ✨ 模块功能

- 创建并监听服务端 socket 连接
- 使用 `epoll` 高效监听读写事件
- 接收并解析客户端请求（支持 `GET` / `POST`）
- 调度线程池异步处理业务逻辑
- 构造并发送 HTTP 响应
- 自动处理连接关闭和异常中断

## 📌 主要特性

- **非阻塞 I/O**：所有 socket 均设置为非阻塞，提升并发性能。
- **高并发处理**：主线程专注于事件监听，工作线程专注处理任务。
- **线程安全**：关键共享资源（如客户端映射表）使用互斥锁保护。
- **模块解耦**：连接管理、请求处理、日志记录、静态资源等各自独立，便于维护和拓展。

## 🛠️ 使用说明

- 主线程通过 `epoll_wait` 等待客户端事件
- 接收到请求后将任务提交给线程池异步执行
- 使用 `Logger` 记录请求信息与错误信息
- 静态资源通过 `StaticFile` 模块进行加载与缓存
- 自动判断连接关闭条件，释放资源防止泄露

## 📦 请求类型

- `GET`: 从静态文件模块获取资源内容。
- `POST`: 解析 `application/x-www-form-urlencoded` 表单数据，并以文本形式展示所有键值对。
- 其他类型返回 `405 Method Not Allowed`。

## 💡 注意事项

- 当前 POST 功能默认解析整段请求体为表单格式，未处理 JSON 或文件上传
- 若客户端未主动关闭连接，服务器通过读写异常或返回值自动判定连接是否断开
- 默认连接使用 `Connection: close`，每次请求处理后关闭连接（可拓展为长连接支持）
